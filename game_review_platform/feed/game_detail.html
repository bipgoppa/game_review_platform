{% extends "base.html" %}
{% load static %}

{% block title %}{{ game.name }}{% endblock %}

{% block content %}
<div class="game-detail-container" style="max-width: 900px; margin: 20px auto; padding: 20px; background-color: #2d3748; border-radius: 8px; color: #e2e8f0;">

    <div class="game-header" style="display: flex; gap: 20px; margin-bottom: 20px;">
        {% if game.cover_url %}
            <img src="{{ game.cover_url }}" alt="Cover for {{ game.name }}" style="width: 200px; height: auto; border-radius: 8px;">
        {% endif %}
        <div class="game-info">
            <h1 style="margin-top: 0;">{{ game.name }}</h1>
            <p><strong>Genres:</strong> {{ game.genres|join:", " }}</p>
            <a href="{% url 'write_review' game_id=game.id %}" class="button" style="display: inline-block; padding: 10px 20px; background-color: #48bb78; color: white; text-decoration: none; border-radius: 5px; font-weight: bold;">
                Write a Review
            </a>
        </div>
    </div>

    <div class="game-summary">
        <h3>Summary</h3>
        <p>{{ game.summary|linebreaksbr }}</p>
    </div>

    <hr style="border-color: #4a5568; margin: 30px 0;">

    <div class="game-reviews-feed">
        <h2>User Reviews</h2>
        {% if reviews %}
            {% for review in reviews %}
                <div class="review-card" style="background-color: #1a202c; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 5px solid #4a5568;">
                    <div class="review-card-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <img src="{{ review.user.profile.avatar.url|default:'/static/feed/images/default_avatar.png' }}" alt="{{ review.user.username }}'s avatar" style="width: 40px; height: 40px; border-radius: 50%;">
                        <div>
                            <strong>{{ review.user.username }}</strong>
                            <span style="color: #a0aec0; font-size: 0.9em;">rated it {{ review.rating }}/10</span>
                        </div>
                    </div>
                    <p>{{ review.content }}</p>
                    <small style="color: #718096;">Posted on {{ review.created_at|date:"F j, Y" }}</small>
                </div>
            {% endfor %}
        {% else %}
            <p>Be the first to write a review for this game!</p>
        {% endif %}
    </div>

</div>
{% endblock %}